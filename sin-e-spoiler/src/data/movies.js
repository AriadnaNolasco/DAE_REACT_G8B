// Movie data from TMDB API structure
export const nowPlayingMovies = {
    page: 1,
    results: [
        {
            adult: false,
            backdrop_path: "/cJvUJEEQ86LSjl4gFLkYpdCJC96.jpg",
            genre_ids: [10752, 28],
            id: 1241436,
            original_language: "en",
            original_title: "Warfare",
            overview: "A platoon of Navy SEALs embarks on a dangerous mission in Ramadi, Iraq, with the chaos and brotherhood of war retold through their memories of the event.",
            popularity: 485.3223,
            poster_path: "/j8tqBXwH2PxBPzbtO19BTF9Ukbf.jpg",
            release_date: "2025-04-09",
            title: "Warfare",
            video: false,
            vote_average: 7.14,
            vote_count: 265
        },
        {
            adult: false,
            backdrop_path: "/2Nti3gYAX513wvhp8IiLL6ZDyOm.jpg",
            genre_ids: [10751, 35, 12, 14],
            id: 950387,
            original_language: "en",
            original_title: "A Minecraft Movie",
            overview: "Four misfits find themselves struggling with ordinary problems when they are suddenly pulled through a mysterious portal into the Overworld: a bizarre, cubic wonderland that thrives on imagination.",
            popularity: 409.3111,
            poster_path: "/yFHHfHcUgGAxziP1C3lLt0q2T4s.jpg",
            release_date: "2025-03-31",
            title: "A Minecraft Movie",
            video: false,
            vote_average: 6.31,
            vote_count: 959
        },
        {
            adult: false,
            backdrop_path: "/jRvhP4AfFnJ03lCQhp1fie7XPSd.jpg",
            genre_ids: [28, 53],
            id: 977294,
            original_language: "en",
            original_title: "Tin Soldier",
            overview: "An ex-special forces operative seeks revenge against a cult leader who has corrupted his former comrades.",
            popularity: 383.402,
            poster_path: "/lFFDrFLXywFhy6khHes1LCFVMsL.jpg",
            release_date: "2025-05-22",
            title: "Tin Soldier",
            video: false,
            vote_average: 7.28,
            vote_count: 1758
        },
        {
            adult: false,
            backdrop_path: "/e3gVl1gnpP7B0ZyLkfpjF4ZB1xT.jpg",
            genre_ids: [28, 53],
            id: 980489,
            original_language: "en",
            original_title: "Gran Turismo",
            overview: "The true story of a gamer who became a professional racer through a series of video game competitions.",
            popularity: 1234.56,
            poster_path: "/51tqzRtKMMZEYUpSYkrUE7v9ehm.jpg",
            release_date: "2023-08-09",
            title: "Gran Turismo",
            video: false,
            vote_average: 7.6,
            vote_count: 2700
        },
        {
            adult: false,
            backdrop_path: "/bQXAqRx2Fgc46uCVWgoPz5L5Dtr.jpg",
            genre_ids: [28, 14],
            id: 436270,
            original_language: "en",
            original_title: "Black Adam",
            overview: "Nearly 5,000 years after he was bestowed with the almighty powers of the Egyptian gods—and imprisoned just as quickly—Black Adam is freed.",
            popularity: 1320.2,
            poster_path: "/pFlaoHTZeyNkG83vxsAJiGzfSsa.jpg",
            release_date: "2022-10-21",
            title: "Black Adam",
            video: false,
            vote_average: 6.8,
            vote_count: 6500
        },
        {
            adult: false,
            backdrop_path: "/wD2kUCX1Bb6oeIb2uz7kbdfLP6k.jpg",
            genre_ids: [10752, 18],
            id: 653346,
            original_language: "en",
            original_title: "Devotion",
            overview: "The harrowing true story of two elite U.S. Navy fighter pilots during the Korean War.",
            popularity: 890.8,
            poster_path: "/26yQPXymbWeCLKwcmyL8dRjAzth.jpg",
            release_date: "2022-11-23",
            title: "Devotion",
            video: false,
            vote_average: 7.1,
            vote_count: 1100
        },
        {
            adult: false,
            backdrop_path: "/sv1xJUazXeYqALzczSZ3O6nkH75.jpg",
            genre_ids: [28, 12, 35],
            id: 616037,
            original_language: "en",
            original_title: "Thor: Love and Thunder",
            overview: "Thor enlists the help of Valkyrie, Korg and ex-girlfriend Jane Foster to fight Gorr the God Butcher.",
            popularity: 1670.4,
            poster_path: "/pIkRyD18kl4FhoCNQuWxWu5cBLM.jpg",
            release_date: "2022-07-08",
            title: "Thor: Love and Thunder",
            video: false,
            vote_average: 6.4,
            vote_count: 7600
        },
        {
            adult: false,
            backdrop_path: "/zGLHX92Gk96O1DJvLil7ObJTbaL.jpg",
            genre_ids: [12, 14, 10751],
            id: 338953,
            original_language: "en",
            original_title: "Fantastic Beasts: The Secrets of Dumbledore",
            overview: "Professor Albus Dumbledore must stop Gellert Grindelwald as he sets out to seize control of the wizarding world.",
            popularity: 1520.1,
            poster_path: "/jrgifaYeUtTnaH7NF5Drkgjg2MB.jpg",
            release_date: "2022-04-15",
            title: "Fantastic Beasts: The Secrets of Dumbledore",
            video: false,
            vote_average: 6.7,
            vote_count: 5400
        },
        {
            adult: false,
            backdrop_path: "/dWnMwcofaUDfQ9GzKrgG4lO3vva.jpg",
            genre_ids: [10751, 16, 12],
            id: 940551,
            original_language: "en",
            original_title: "Inside Out 2",
            overview: "Teenage Riley’s mind headquarters is undergoing a sudden demolition to make room for something entirely unexpected: new Emotions.",
            popularity: 3200.3,
            poster_path: "/kXfqcdQKsToO0OUXHcrrNCHDBzO.jpg",
            release_date: "2025-06-14",
            title: "Inside Out 2",
            video: false,
            vote_average: 7.14,
            vote_count: 947
        },
        {
            adult: false,
            backdrop_path: "/xOMo8BRK7PfcJv9JCnx7s5hj0PX.jpg",
            genre_ids: [12, 28, 14],
            id: 866398,
            original_language: "en",
            original_title: "Dune: Part Two",
            overview: "Paul Atreides unites with Chani and the Fremen while seeking revenge against the conspirators who destroyed his family.",
            popularity: 2900.1,
            poster_path: "/8b8R8l88Qje9dn9OE8PY05Nxl1X.jpg",
            release_date: "2025-11-20",
            title: "Dune: Part Two",
            video: false,
            vote_average: 6.14,
            vote_count: 875
        },
        {
            adult: false,
            backdrop_path: "/sR0SpCrXamlIkYMdfz83sFn5JS6.jpg",
            genre_ids: [12, 14],
            id: 823482,
            original_language: "en",
            original_title: "The Marvels",
            overview: "Carol Danvers, Kamala Khan and Monica Rambeau team up when their powers become entangled.",
            popularity: 1450.9,
            poster_path: "/zIYROrkHJPYB3VTiW1L9QVgaQO.jpg",
            release_date: "2025-10-10",
            title: "The Marvels",
            video: false,
            vote_average: 6.47,
            vote_count: 1786
        },
        {
            adult: false,
            backdrop_path: "/aAIN5AJrZ5xOqkDnu5HRVYPSfya.jpg",
            genre_ids: [12, 28],
            id: 980489,
            original_language: "en",
            original_title: "Kingdom of the Planet of the Apes",
            overview: "Several generations in the future following Caesar's reign, apes are now the dominant species and live harmoniously while humans have been reduced to living in the shadows.",
            popularity: 1999.5,
            poster_path: "/gKkl37BQuKTanygYQG1pyYgLVgf.jpg",
            release_date: "2025-09-15",
            title: "Kingdom of the Planet of the Apes",
            video: false,
            vote_average: 4.87,
            vote_count: 748
        }
    ],
    total_pages: 5,
    total_results: 100
};

// Helper function to get full image URL
export const getImageUrl = (path, size = "w342") => {
    return `https://image.tmdb.org/t/p/${size}${path}`;
};

// Map genre IDs to genre names
export const genres = {
    28: "Action",
    12: "Adventure",
    14: "Fantasy",
    35: "Comedy",
    53: "Thriller",
    10751: "Family",
    10752: "War"
};

// Convert TMDB data to our app structure
export const convertToAppFormat = (tmdbMovie) => {
    return {
        id: tmdbMovie.id,
        title: tmdbMovie.title,
        rating: tmdbMovie.vote_average / 2, // Convert from 10-point to 5-point scale
        genre: tmdbMovie.genre_ids.map(id => genres[id])[0] || "Unknown",
        duration: "120 min", // Placeholder since TMDB doesn't provide duration
        image: getImageUrl(tmdbMovie.poster_path),
        description: tmdbMovie.overview,
        showTimes: ["2:30 PM", "5:45 PM", "9:00 PM"], // Placeholder showtimes
        releaseDate: tmdbMovie.release_date
    };
};

// Get all movies in app format
export const getMovies = () => {
    return nowPlayingMovies.results.map(convertToAppFormat);
};

export const getUpcomingMovies = () => {
    // Suponiendo que nowPlayingMovies.total_results contiene todas
    const allMovies = nowPlayingMovies.results;

    // Aquí asumimos que hay más películas para estrenos próximos, o simular con un arreglo
    // Para simplificar, vamos a filtrar por fecha mayor que hoy
    const today = new Date();

    // Ejemplo simple: solo las que su fecha de estreno > hoy
    const upcoming = allMovies.filter(movie => new Date(movie.release_date) > today);

    // Usamos convertToAppFormat para adaptarlas al formato de la app
    return upcoming.map(convertToAppFormat);
};
